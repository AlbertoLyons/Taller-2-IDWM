<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iniciar sesión - Tienda IDWM</title>
</head>
<body>
  <div class="container">
    <div class="title-box">
      <h1>Tienda IDWM</h1>
    </div>

    <h2>Iniciar sesión</h2>
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <!-- Campo de correo -->
      <div class="form-group">
        <label for="email">Correo electrónico</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          [class.border-red-500]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
        />
        <div *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" class="error-message">
          {{ getFieldError('email') }}
        </div>
      </div>

      <!-- Campo de contraseña -->
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input
          id="password"
          type="password"
          formControlName="password"
          [class.border-red-500]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
        />
        <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="error-message">
          {{ getFieldError('password') }}
        </div>
      </div>

      <!-- Enlace de registro -->
      <a href="register" class="register-link"> ¿No tienes cuenta? Regístrate</a>

      <!-- Botón de enviar -->
      <div class="form-group">
        <button
          type="submit"
          [disabled]="loginForm.invalid || loading"
        >
          <ng-container *ngIf="loading; else normal">
            <span class="loading-spinner"></span> Procesando...
          </ng-container>
          <ng-template #normal>
            Iniciar sesión
          </ng-template>
        </button>
      </div>
    </form>
  </div>
</body>
</html>
