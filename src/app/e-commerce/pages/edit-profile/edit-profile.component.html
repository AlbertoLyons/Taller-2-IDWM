<body>
    <app-navbar>            
      <div class="header-buttons">
        <button class="btn-cerrar-sesion" (click)="logout()">Cerrar sesi√≥n</button>
        <a href="cart"><button>üõí</button></a>
      </div>
    </app-navbar>
  
    <div class="container">
      <div class="form-container">
        
        <!-- Mensaje de √©xito/error para Editar Perfil -->
        <div *ngIf="successMessage || errorMessage" class="alert" [ngClass]="{'success': successMessage, 'error2': errorMessage}">
          {{ successMessage || errorMessage }}
        </div>
  
        <!-- Formulario de edici√≥n de perfil -->
        <form [formGroup]="editUserForm" (ngSubmit)="onSubmit()">
          <h2>Editar perfil</h2>
          <label for="nombre">Nombre</label>
          <input id="nombre" formControlName="nombre" type="text" [placeholder]="nombrePlaceholder">
          
          <div *ngIf="editUserForm.get('nombre')?.hasError('minlength') && editUserForm.get('nombre')?.touched">
            <span class="error">El nombre debe tener al menos 8 caracteres.</span>
          </div>
          <div *ngIf="editUserForm.get('nombre')?.hasError('maxlength') && editUserForm.get('nombre')?.touched">
            <span class="error">El nombre no debe tener m√°s de 255 caracteres.</span>
          </div>
  
          <label for="fecha">Fecha de nacimiento</label>
          <input id="fecha" formControlName="fecha" type="text" [placeholder]="fechaPlaceholder">
          
          <div *ngIf="editUserForm.get('fecha')?.hasError('invalidDateFormat') && editUserForm.get('fecha')?.touched">
            <span class="error">La fecha debe tener el formato "aaaa-mm-dd".</span>
          </div>
  
          <label for="genero">G√©nero</label>
          <input id="genero" formControlName="genero" type="text" [placeholder]="generoPlaceholder">
          
          <div *ngIf="editUserForm.get('genero')?.hasError('invalidGender') && editUserForm.get('genero')?.touched">
            <span class="error">El g√©nero debe ser uno de los siguientes: Femenino, Masculino, Otro, Prefiero no decirlo.</span>
          </div>
  
          <button type="submit" [disabled]="!editUserForm.valid" [class.disabled-button]="!editUserForm.valid">Editar</button>
        </form>
  
        <!-- Formulario para cambiar contrase√±a -->
        <form [formGroup]="passwordForm" (ngSubmit)="onPasswordChange()" style="margin-top: 20px;">
          <h2>Cambiar contrase√±a</h2>
  
          <label for="actual">Contrase√±a actual</label>
          <input id="actual" formControlName="actual" type="password">
          
          <div *ngIf="passwordForm.get('actual')?.hasError('required') && passwordForm.get('actual')?.touched">
            <span class="error">La contrase√±a actual es obligatoria.</span>
          </div>
  
          <label for="nueva">Contrase√±a nueva</label>
          <input id="nueva" formControlName="nueva" type="password">
          
          <div *ngIf="passwordForm.get('nueva')?.hasError('required') && passwordForm.get('nueva')?.touched">
            <span class="error">La nueva contrase√±a es obligatoria.</span>
          </div>
  
          <label for="confirmar">Confirmar contrase√±a</label>
          <input id="confirmar" formControlName="confirmar" type="password">
          
          <div *ngIf="passwordForm.get('confirmar')?.hasError('required') && passwordForm.get('confirmar')?.touched">
            <span class="error">Confirmar contrase√±a es obligatorio.</span>
          </div>
  
          <button type="submit" [disabled]="!passwordForm.valid" [class.disabled-button]="!passwordForm.valid">Cambiar</button>
        </form>
        
      </div>
    </div>
  </body>
  